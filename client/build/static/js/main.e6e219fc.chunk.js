/*! For license information please see main.e6e219fc.chunk.js.LICENSE.txt */
(this["webpackJsonpmern-stack-authorization"]=this["webpackJsonpmern-stack-authorization"]||[]).push([[0],{176:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(10),s=n.n(a),i=n(24),c=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,249)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),s(e),i(e)}))},o=n(18),u=n.n(o),l=n(27),d=n(129),j=n(17),p=n(58),h=n.n(p),b=function(e){return new Promise((function(t){setTimeout(t,e)}))};h.a.defaults.baseURL="http://localhost:5000",h.a.interceptors.response.use(function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(1e3);case 3:return e.abrupt("return",t);case 6:return e.prev=6,e.t0=e.catch(0),console.log("interceptor error: ",e.t0),e.next=11,Promise.reject(e.t0);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}());var x=function(e){return e.data},g=function(e){return h.a.get(e).then(x)},m=function(e,t){return h.a.post(e,t).then(x)},f=function(e){return h.a.delete(e).then(x)},O={Users:{find:function(e){return g("userdata/".concat(e))},details:function(e){return m("/login",e)},create:function(e){return m("/users/register",e)},delete:function(e){return f("/users/".concat(e))},logout:function(){return g("/logout")}}},v={userStore:new function e(){var t=this;Object(d.a)(this,e),this.currentUser=void 0,this.loading=!1,this.loadingInitial=!0,this.editMode=!1,this.isAuthenticated=!1,this.errorMessage="",this.loadUser=Object(l.a)(u.a.mark((function e(){var n,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:void 0,!(r=t.currentUser)){e.next=6;break}return e.abrupt("return",r);case 6:return t.setLoadingInitial(!0),e.prev=7,e.next=10,O.Users.details(n);case 10:return r=e.sent,t.setUser(r),t.setLoadingInitial(!1),e.abrupt("return",r);case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0),t.setLoadingInitial(!1);case 20:case"end":return e.stop()}}),e,null,[[7,16]])}))),this.loadUserById=function(){var e=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.currentUser)){e.next=5;break}return e.abrupt("return",r);case 5:return t.setLoadingInitial(!0),e.prev=6,e.next=9,O.Users.find(n);case 9:return r=e.sent,Object(j.g)((function(){t.isAuthenticated=!0})),e.next=13,t.setUser(r);case 13:return t.setLoadingInitial(!1),e.abrupt("return",r);case 17:e.prev=17,e.t0=e.catch(6),console.log(e.t0),t.setLoadingInitial(!1);case 21:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}(),this.loadCurrentUserName=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.currentUser){e.next=2;break}return e.abrupt("return",t.currentUser);case 2:case"end":return e.stop()}}),e)}))),this.getUser=function(e){return t.currentUser},this.setUser=function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(j.g)((function(){t.currentUser=n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setLoadingInitial=function(e){Object(j.g)((function(){t.loadingInitial=e}))},this.setLoading=function(e){Object(j.g)((function(){t.loading=e}))},this.createUser=function(){var e=Object(l.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setLoading(!0),e.prev=1,e.next=4,O.Users.create(n);case 4:(n=e.sent).username&&t.setUser(n),t.setLoading(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.setLoading(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),this.logUserOut=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setLoading(!0),e.prev=1,!t.currentUser){e.next=5;break}return e.next=5,O.Users.logout();case 5:t.setUser(void 0),t.setLoading(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t.setLoading(!1);case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),Object(j.d)(this)}},w=Object(r.createContext)(v),y=function(){return Object(r.useContext)(w)},S=(n(174),n(175),n(176),n(230)),k=n(32),U=n(239),N=n(243),P=n(31),I=n(2),L=Object(P.a)((function(){var e=y().userStore,t=e.logUserOut,n=e.currentUser,a=Object(r.useState)(),s=Object(k.a)(a,2),c=s[0],o=s[1];Object(r.useEffect)((function(){return n&&o(n.username),function(){}}),[n]);return Object(I.jsxs)(U.a,{inverted:!0,fixed:"top",children:[Object(I.jsxs)(S.a,{children:[Object(I.jsxs)(U.a.Item,{as:i.c,to:"/",exact:!0,header:!0,children:[Object(I.jsx)("img",{src:"/assets/passport-js-icon.png",alt:"logo",style:{marginRight:10}}),"MERN Stack Authentication"]}),!n&&Object(I.jsx)(U.a.Item,{children:Object(I.jsx)(N.a,{as:i.c,to:"/login",positive:!0,content:"Login"})}),n&&Object(I.jsx)(U.a.Item,{children:Object(I.jsx)(N.a,{as:i.c,to:"/login",positive:!0,content:"Logout",onClick:function(){o(""),t()}})})]}),Object(I.jsx)(S.a,{style:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:n&&Object(I.jsx)("h4",{style:{color:"white",fontWeight:100,marginRight:20},children:c})})]})})),C=n(14),T=n(245),A=n(246),E=n(136),F=function(){return Object(I.jsx)(T.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead",children:Object(I.jsxs)(S.a,{text:!0,children:[Object(I.jsxs)(A.a,{as:"h1",inverted:!0,children:[Object(I.jsx)(E.a,{size:"massive",src:"/assets/passport-js-icon.png",alt:"logo",style:{marginBottom:12}}),"MERN Stack"]}),Object(I.jsx)(A.a,{as:"h2",inverted:!0,content:"Authentication with Passport.js"}),Object(I.jsx)(N.a,{as:i.b,to:"/dashboard",size:"huge",inverted:!0,style:{marginTop:30},children:"Show me the magic!"})]})})},D=n(247),z=Object(P.a)((function(e){var t=y().userStore.currentUser,n=Object(r.useState)(),a=Object(k.a)(n,2),s=a[0],c=a[1];return Object(r.useEffect)((function(){return t&&c(t._id),function(){}}),[t]),Object(I.jsxs)(D.a,{children:[Object(I.jsx)("h1",{children:"Welcom to the Public Dashboard!"}),Object(I.jsx)(N.a,{as:i.b,to:'/dashboard/user/"'.concat(s),size:"huge",inverted:!0,style:{marginTop:30},children:"Go to Private (Authorized) Dashboard"})]})})),R=n(45),_=n(29),M=n(242),V=n(234),W=n(236),B=n(238),Y=n(240),G=n(231),J=Object(G.a)((function(e){return{button:{margin:e.spacing(1),height:30,marginTop:25},leftIcon:{marginRight:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)},iconSmall:{fontSize:20},root:{padding:e.spacing(3,2),maxWidth:350},container:{display:"flex",flexWrap:"wrap"},textField:{margin:"5px 8px",width:300}}}));var H=function(e){var t=J(),n=Object(C.e)(),a=y().userStore,s=a.createUser,i=a.currentUser,c=Object(r.useState)({_id:"",username:"",password:"",confirmPassword:""}),o=Object(k.a)(c,2),d=o[0],j=o[1],p=function(e){var t=e.target,n=t.name,r=t.value;j(Object(_.a)(Object(_.a)({},d),{},Object(R.a)({},n,r)))},h=function(){var e=Object(l.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(d.password===d.confirmPassword)){e.next=11;break}return e.next=5,Object(_.a)(Object(_.a)({},d),{},{_id:Object(M.a)()});case 5:return r=e.sent,e.next=8,delete r[r.confirmPassword];case 8:s(r).then((function(){n.push("/dashboard/user/".concat(r._id))})),e.next=12;break;case 11:alert("Your passwords do not match! Please reenter a different password.");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{children:[i,Object(I.jsxs)(V.a,{className:t.root,children:[Object(I.jsx)(W.a,{variant:"h5",component:"h3",children:e.formName}),Object(I.jsx)(W.a,{component:"p",style:{fontSize:12,margin:10},children:e.formDescription}),Object(I.jsxs)("form",{onSubmit:h,children:[Object(I.jsx)(B.a,{label:"Email",id:"margin-normal",name:"username",defaultValue:d.username,className:t.textField,helperText:"Enter your email",variant:"filled",onChange:p}),Object(I.jsx)(B.a,{label:"Password",id:"margin-normal",name:"password",defaultValue:d.password,className:t.textField,variant:"outlined",onChange:p}),Object(I.jsx)(B.a,{label:"Confirm Password",id:"margin-normal",name:"confirmPassword",className:t.textField,defaultValue:d.confirmPassword,variant:"outlined",onChange:p}),Object(I.jsx)(Y.a,{type:"submit",variant:"contained",color:"default",className:t.button,children:"SignUp"})]}),Object(I.jsx)("div",{style:{textAlign:"center",marginTop:15},children:Object(I.jsx)("a",{href:"/login",children:"Already have an Account? Login HERE"})})]})]})},q=Object(G.a)((function(e){return{imgStyles:{height:40,marginTop:5,marginLeft:25,cursor:"pointer",boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)","&:hover":{opacity:".85"}}}})),K=function(){var e=q();return Object(I.jsx)("div",{children:Object(I.jsx)("img",{src:"/assets/google-social-sign-on.png",alt:"google Oauth sign-on button",width:"300",onClick:function(){window.open("http://localhost:5000/auth/google","_self")},className:e.imgStyles,style:{marginTop:30}})})},Q=function(){var e=q();return Object(I.jsx)("div",{children:Object(I.jsx)("img",{src:"/assets/facebook-social-sign-on.png",alt:"facebook social media OAuth alternate sing-on",width:"300",onClick:function(){window.open("http://localhost:5000/auth/facebook","_self")},className:e.imgStyles})})},X=function(){var e=q();return Object(I.jsx)("div",{children:Object(I.jsx)("img",{src:"/assets/github-social-sign-on.png",alt:"google Oauth sign-on button",width:"300",onClick:function(){window.open("http://localhost:5000/auth/google","_self")},className:e.imgStyles})})};var Z=function(){return Object(I.jsxs)("div",{style:{width:450,margin:"150px auto",backgroundColor:"#d2d2d2",padding:50,boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)"},children:[Object(I.jsx)("div",{children:Object(I.jsx)(H,{formName:"Register New Account",formDescription:"Enter your email and choose a password"})}),Object(I.jsx)("div",{children:Object(I.jsx)(K,{})}),Object(I.jsx)("div",{children:Object(I.jsx)(Q,{})}),Object(I.jsx)("div",{children:Object(I.jsx)(X,{})})]})},$=Object(G.a)((function(e){return{button:{margin:e.spacing(1),height:30,marginTop:25},leftIcon:{marginRight:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)},iconSmall:{fontSize:20},root:{padding:e.spacing(3,2),maxWidth:350},container:{},textField:{margin:"5px 8px",width:300}}})),ee=function(e){var t=e.formName,n=e.formDescription,a=$(),s=Object(C.e)(),i=y().userStore.loadUser,c=Object(r.useState)({_id:"",username:"",password:""}),o=Object(k.a)(c,2),u=o[0],l=o[1],d=function(e){var t=e.target,n=t.name,r=t.value;l(Object(_.a)(Object(_.a)({},u),{},Object(R.a)({},n,r)))};return Object(I.jsx)("div",{children:Object(I.jsxs)(V.a,{className:a.root,children:[Object(I.jsx)(W.a,{variant:"h5",component:"h3",children:t}),Object(I.jsx)(W.a,{component:"p",style:{fontSize:12,margin:10},children:n}),Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(u).then((function(e){e?(console.log("I am the response in handleOnSubmit: ",e),s.push("/dashboard/user/".concat(e._id))):s.push("/login")}))},children:[Object(I.jsx)(B.a,{label:"Email",placeholder:"Enter your email here",name:"username",defaultValue:u.username,onChange:d,id:"margin-normal",className:a.textField,helperText:"Enter your Email",variant:"filled"}),Object(I.jsx)(B.a,{label:"Password",id:"margin-normal",name:"password",defaultValue:u.password,placeholder:"Enter your email here",className:a.textField,helperText:"Enter your Password",variant:"outlined",onChange:d}),Object(I.jsx)(Y.a,{type:"submit",variant:"contained",color:"default",className:a.button,children:"Login"})]}),Object(I.jsx)("div",{style:{textAlign:"center",marginTop:15},children:Object(I.jsx)("a",{href:"/signup",children:"Sign up for New Account!"})})]})})};var te=Object(P.a)((function(){return Object(I.jsxs)("div",{style:{width:450,margin:"150px auto",backgroundColor:"#d2d2d2",padding:50,boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)"},children:[Object(I.jsx)("div",{children:Object(I.jsx)(ee,{formName:"Login to your Account",formDescription:"IMPORTANT: Your email is your username"})}),Object(I.jsx)("div",{children:Object(I.jsx)(K,{})}),Object(I.jsx)("div",{children:Object(I.jsx)(Q,{})}),Object(I.jsx)("div",{children:Object(I.jsx)(X,{})})]})})),ne=n(241),re=n(237),ae=function(e){var t=e.inverted,n=void 0===t||t,r=e.content,a=void 0===r?"Loading...":r;return Object(I.jsx)(ne.a,{active:!0,inverted:n,children:Object(I.jsx)(re.a,{content:a})})},se=Object(G.a)((function(e){return{button:{margin:e.spacing(1),height:30,marginTop:25},leftIcon:{marginRight:e.spacing(1)},rightIcon:{marginLeft:e.spacing(1)},iconSmall:{fontSize:20},root:{padding:e.spacing(3,2),maxWidth:350},container:{display:"flex",flexWrap:"wrap"},textField:{margin:"5px 8px",width:300}}}));var ie=Object(P.a)((function(e){var t=se(),n=y().userStore,a=n.createUser,s=n.currentUser,i=Object(r.useState)({password:"",confirmPassword:""}),c=Object(k.a)(i,2),o=c[0],d=c[1],j=function(e){var t=e.target,n=t.name,r=t.value;d(Object(_.a)(Object(_.a)({},o),{},Object(R.a)({},n,r)))},p=function(){var t=Object(l.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!(o.password===o.confirmPassword)||!s){t.next=9;break}return t.next=5,Object(_.a)(Object(_.a)({},s),{},{password:o.password});case 5:r=t.sent,a(r).then((function(){e.setDisplayPasswordForm(!1)})),t.next=10;break;case 9:alert("Your passwords do not match! Please reenter a different password.");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(I.jsx)("div",{children:Object(I.jsxs)(V.a,{className:t.root,children:[Object(I.jsx)(W.a,{variant:"h5",component:"h3",children:e.formName}),Object(I.jsx)(W.a,{component:"p",style:{fontSize:12,margin:10},children:e.formDescription}),Object(I.jsxs)("form",{onSubmit:p,children:[Object(I.jsx)(B.a,{label:"Password",id:"margin-normal",name:"password",defaultValue:o.password,className:t.textField,variant:"outlined",onChange:j}),Object(I.jsx)(B.a,{label:"Confirm Password",id:"margin-normal",name:"confirmPassword",className:t.textField,defaultValue:o.confirmPassword,variant:"outlined",onChange:j}),Object(I.jsx)(Y.a,{type:"submit",variant:"contained",color:"default",className:t.button,children:"Create"})]}),Object(I.jsx)("div",{style:{textAlign:"center",marginTop:15}})]})})})),ce=Object(P.a)((function(e){var t=y().userStore,n=t.loadUserById,a=t.loadingInitial,s=t.currentUser,c=t.isAuthenticated,o=Object(C.g)().id,u=Object(r.useState)(!0),l=Object(k.a)(u,2),d=l[0],j=l[1];return Object(r.useEffect)((function(){n(o).then((function(e){(null===e||void 0===e?void 0:e.localAccount)&&j(!1)}))}),[o,n]),!a||s||c?s&&c&&s.hasOwnProperty("accounts")&&!s.localAccount&&d?Object(I.jsx)("div",{style:{width:450,margin:"150px auto",backgroundColor:"#d2d2d2",padding:50,boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)"},children:Object(I.jsx)(ie,{setDisplayPasswordForm:j,formName:"Choose a password for this account:",formDescription:"IMPORTANT: Choosing a password will enable alternative authentication methods using your email and password -in addition to the 3rd party registration (authentication) you are currently using."})}):Object(I.jsx)("div",{children:s&&Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{children:Object(I.jsxs)("h3",{children:["ID: ",s._id]})}),Object(I.jsx)("li",{children:Object(I.jsxs)("h3",{children:["USERNAME: ",s.username]})}),Object(I.jsx)(N.a,{as:i.b,to:"/dashboard",size:"huge",inverted:!0,style:{marginTop:30},children:"Go to Public Dashboard"})]})}):Object(I.jsx)(ae,{content:"Loading app"})}));var oe=Object(P.a)((function(){var e=Object(C.f)();return Object(I.jsxs)(r.Fragment,{children:[Object(I.jsx)(C.a,{exact:!0,path:"/",component:F}),Object(I.jsx)(C.a,{path:"/(.+)",render:function(){return Object(I.jsxs)(r.Fragment,{children:[Object(I.jsx)(L,{}),Object(I.jsxs)(S.a,{style:{marginTop:"7em"},children:[Object(I.jsx)(C.a,{exact:!0,path:["/dashboard"],component:z}),Object(I.jsx)(C.a,{path:"/login",component:te},e.key),Object(I.jsx)(C.a,{path:"/signup",component:Z},e.key+"1"),Object(I.jsx)(C.a,{exact:!0,path:"/dashboard/user/:id",component:ce})]})]})}})]})}));s.a.render(Object(I.jsx)(w.Provider,{value:v,children:Object(I.jsx)(i.a,{children:Object(I.jsx)(oe,{})})}),document.getElementById("root")),c()}},[[189,1,2]]]);
//# sourceMappingURL=main.e6e219fc.chunk.js.map